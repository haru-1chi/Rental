<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rental_2</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@500&display=swap" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
        crossorigin="anonymous"></script>
    <style>
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
            width: 100%;
            max-width: 347px;
        }

        .container-fluid {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 2rem;
        }

        .container-input {
            display: flex;
            width: 100%;
        }

        input {
            width: 100%;
            border: #D9D9D9 solid 1px;
            border-radius: 6px;
        }

        h2 {
            font-family: Kanit;
            font-size: 16px;
            font-weight: 300;
            line-height: 20px;

            color: #000000;
        }

        p {
            font-family: Kanit;
            font-size: 14px;
            font-weight: 275;
            line-height: 20px;
            color: #7D756C;
        }

        h5 {
            font-family: Kanit;
            font-size: 18px;
            font-weight: 700;
            line-height: 20px;
            text-align: left;
            color: #4e4e4e;
            margin-left: 1rem;
        }

        h4 {
            font-family: Kanit;
            font-size: 24px;
            font-weight: 500;
            line-height: 20px;
            text-align: center;
            color: #C1C1C1;
            margin-top: 2rem;
        }

        .container {
            width: 100%;
            max-width: 400px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .detail {
            padding: 20px 0px;
            width: 100%;
            max-width: 400px;
        }

        .photo-section {
            width: 100%;
            max-width: 400px;
            display: flex;
            flex-direction: column;
        }

        .detail-header {
            background-color: #afaeae3d;
            border-radius: 12px 12px 0px 0px;
            width: 100%;
            padding-top: 0.25px;
            padding-bottom: 0.25px;
        }

        p {
            font-family: Kanit;
            margin: 0px;
            padding: 0px;
        }

        .detail-header p {
            font-family: Kanit;
            font-size: 16px;
            font-weight: 300;
            line-height: 20px;
            text-align: left;
            padding-top: 5px;
            padding-bottom: 5px;
            margin-left: 1rem;
            color: #FC6336;
        }

        .detail-body {
            border: #0000001A solid 1px;
            border-radius: 0px 0px 12px 12px;
            width: 100%;
            padding-top: 0.25px;
            padding-bottom: 0.25px;
        }

        .photo-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            width: 100%;
            margin: 10px 0;
            margin-bottom: 30px;
            justify-items: center;
        }

        .btn-custom {
            font-family: Kanit;
            background-color: #fc6336;
            color: white;
            border: none;
            padding: 10px 28px;
            border-radius: 10px;
            font-size: 16px;
            align-items: center;
            text-align: center;
            cursor: pointer;
            box-shadow: #b9b9b9 0px 2px 10px 0px;
        }

        .svg-share {
            margin-right: 0.5rem;
        }

        .btn-custom {
            font-family: Kanit;
            background-color: #fc6336;
            color: white;
            border: none;
            padding: 10px 28px;
            border-radius: 10px;
            font-size: 16px;
            align-items: center;
            text-align: center;
            cursor: pointer;
            box-shadow: #b9b9b9 0px 2px 10px 0px;
            margin-bottom: 20vh;
        }

        .modal {
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            background-color: #fff;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 375px;
            text-align: center;
        }

        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        .modal-buttons {
            text-align: center;
            margin-top: 20px;
            width: 100%;
            display: flex;
            gap: 15px;
        }

        .btn-cancel {
            font-family: Kanit;
            background-color: #fc6336;
            color: white;
            border: none;
            width: 100%;
            height: 48px;
            border-radius: 10px;
            font-size: 16px;
            align-items: center;
            text-align: center;
            cursor: pointer;
            margin-right: 15px;
        }

        .btn-ok {
            font-family: Kanit;
            background-color: #000000;
            color: white;
            border: none;
            width: 100%;
            height: 48px;
            border-radius: 10px;
            font-size: 16px;
            align-items: center;
            text-align: center;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <div class="container-fluid">
        <nav>
            <svg class="btn-back" width="12" height="20" viewBox="0 0 12 20" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M2.61526 9.99795L11.1073 1.27095C11.1772 1.20063 11.2325 1.11713 11.2699 1.0253C11.3073 0.933466 11.3262 0.835122 11.3253 0.735957C11.3245 0.636792 11.304 0.538775 11.2651 0.447578C11.2261 0.35638 11.1695 0.273814 11.0984 0.204657C11.0273 0.135499 10.9432 0.0811237 10.851 0.0446769C10.7588 0.00823013 10.6602 -0.00956431 10.5611 -0.0076766C10.4619 -0.00578889 10.3642 0.0157435 10.2734 0.0556744C10.1826 0.0956054 10.1007 0.153142 10.0323 0.224955L1.03226 9.47495C0.896042 9.61497 0.819824 9.80261 0.819824 9.99795C0.819824 10.1933 0.896042 10.3809 1.03226 10.521L10.0323 19.771C10.1007 19.8428 10.1826 19.9003 10.2734 19.9402C10.3642 19.9802 10.4619 20.0017 10.5611 20.0036C10.6602 20.0055 10.7588 19.9877 10.851 19.9512C10.9432 19.9148 11.0273 19.8604 11.0984 19.7913C11.1695 19.7221 11.2261 19.6395 11.2651 19.5483C11.304 19.4571 11.3245 19.3591 11.3253 19.26C11.3262 19.1608 11.3073 19.0624 11.2699 18.9706C11.2325 18.8788 11.1772 18.7953 11.1073 18.725L2.61526 9.99795Z"
                    fill="black" />
            </svg>
            <img src="./public/HERO-01 2.svg" alt="" class="mx-auto d-block">
        </nav>

        <div class="detail container">
            <h2>ข้อมูลเช่ารถ</h2>
            <p>เลข QR CODE</p>
            <div class="container-input">
                <input type="text" name="" id="">
                <svg class="ml-3" width="29" height="29" viewBox="0 0 29 29" fill="none"
                    xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M1.32373 9.99114V5.27818C1.32373 4.27822 1.72096 3.31921 2.42805 2.61213C3.13513 1.90505 4.09413 1.50781 5.0941 1.50781H9.80706M19.233 1.50781H23.9459C24.9459 1.50781 25.9049 1.90505 26.612 2.61213C27.3191 3.31921 27.7163 4.27822 27.7163 5.27818V9.99114M1.32373 19.4171V24.13C1.32373 25.13 1.72096 26.089 2.42805 26.7961C3.13513 27.5032 4.09413 27.9004 5.0941 27.9004H9.80706M27.7163 19.4171V24.13C27.7163 25.13 27.3191 26.089 26.612 26.7961C25.9049 27.5032 24.9459 27.9004 23.9459 27.9004H19.233M4.15151 14.7041H24.8885"
                        stroke="black" stroke-width="1.2" />
                </svg>
            </div>

            <div class="detail container">
                <div class="container">
                    <div class="detail-header">
                        <p>รายละเอียด</p>
                    </div>
                    <div class="detail-body"></div>
                </div>
            </div>

            <div class="photo-section container">
                <h2>รูปถ่ายตอนรับรถ</h2>
                <div class="photo-grid">
                </div>
            </div>

            <button type="button" class="btn-custom">
                บันทึก
            </button>

            <div id="photoModal" class="modal" style="display: none;">
                <div class="modal-content">
                    <h2>ยืนยันรับรถ</h2>
                    <p>บันทึกข้อมูล</p>
                    <div class="modal-buttons">
                        <button id="cancelButton" class="btn-cancel">ยกเลิก</button>
                        <button id="confirmButton" class="btn-ok">ตกลง</button>
                    </div>
                </div>
            </div>
        </div>
    </div>



</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script>
    $(document).ready(function () {
        let specList = [
            {
                id: 1,
                name: "แบรนด์รถ",
                value: "WEDA",
            },
            {
                id: 2,
                name: "รุ่นรถ",
                value: "AQUA SPECIFCATION",
            },
            {
                id: 3,
                name: "เลขตัวถัง",
                value: "EVH12352555204",
            },
            {
                id: 4,
                name: "สีรถ",
                value: "เหลืองดำ",
            },
            {
                id: 5,
                name: "กำลังมอเตอร์ (Watt)",
                value: "3,000",
            },
            {
                id: 6,
                name: "ทะเบียนรถ",
                value: "-",
            },
            {
                id: 7,
                name: "จังหวัดที่จดทะเบียน",
                value: "-",
            }
        ];



        specList.forEach((item, index) => {
            $(".detail-body").append(`
            <div class="row py-2">
                <div class="col-5 center">
                    <p class="kanit text-sm text-right">${item.name}</p>
                </div>
                <div class="col-6 center text-orange">
                    <p class="kanit text-sm">${item.value}</p>
                </div>
            </div>
        `);
        });



        let photoPlaceholders = [
            {
                id: 1,
                label: "ด้านหน้า"
            },
            {
                id: 2,
                label: "ด้านหลัง"
            },
            {
                id: 3,
                label: "ด้านซ้าย"
            },
            {
                id: 4,
                label: "ด้านขวา"
            }
        ];

        photoPlaceholders.forEach((item, index) => {
            $(".photo-grid").append(`
            <div style="text-align: center;" class="photo-placeholder" data-id="${item.id}">
                <input type="file" style="display:none;" id="fileInput-${item.id}" accept="image/*">
                <div class="photo-container" data-id="${item.id}" style="cursor: pointer;">
                    <svg width="129" height="106" viewBox="0 0 129 106" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="1.16455" y="1.19922" width="126.724" height="104.108" rx="5.5" fill="white" stroke="#D9D9D9" />
                        <line x1="65.0266" y1="35.1172" x2="65.0266" y2="54.9477" stroke="#D1D1D1" />
                        <line x1="74.4419" y1="45.5322" x2="54.6114" y2="45.5322" stroke="#D1D1D1" />
                    </svg>
                    <p style="text-align: center; margin-top: -25px; font-weight: 100;">${item.label}</p>
                </div>
            </div>
        `);
        });

        $(".photo-container").on("click", function () {
            const id = $(this).data("id");
            $(`#fileInput-${id}`).trigger("click");
        });

        let files = {}; // Object to store selected files

        $("input[type='file']").on("change", function (e) {
            const input = e.target;
            const id = $(input).attr("id").split("-")[1];
            const file = input.files[0];

            if (file) {
                files[id] = file;
                const reader = new FileReader();

                reader.onload = function (e) {
                    const imageSrc = e.target.result;
                    $(`.photo-container[data-id="${id}"]`).html(`
                    <img src="${imageSrc}" alt="Uploaded Image" style="width: 129px; height: 106px; object-fit: cover; border-radius: 5px; border: #0000001A solid 1px;">
                `);
                };

                reader.readAsDataURL(file);
            }
        });

        function showModal() {
            $('#photoModal').show();
        }

        function hideModal() {
            $('#photoModal').hide();
        }

        $('#cancelButton').on('click', function () {
            hideModal();
        });

        $('#confirmButton').on('click', function () {
            const formData = new FormData();

            Object.keys(files).forEach(key => {
                formData.append(`photo-${key}`, files[key]);
            });

            $.ajax({
                url: '/api/save-image',
                method: 'POST',
                data: formData,
                processData: false,
                contentType: false,
                success: function (response) {
                    window.location.href = '/success-page';
                },
                error: function (error) {
                    console.error('Error saving image', error);
                }
            });
        });

        document.querySelector('.btn-custom').addEventListener('click', function () {
            showModal();
        });
    });
</script>

</html>